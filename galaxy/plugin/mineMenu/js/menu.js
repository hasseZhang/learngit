var menu=function(){var e=$.getHelper("provider:menu").cache(),n=$.page,t=n.type.toLowerCase(),r=e[n.type].subList,u=function(){var e=[];for(var n in r)e.push(r[n].name);return e}(),i={isActive:!1,type:n.type,menuMapObj:e[n.type].subList,current:n.currentMenu};function o(e){return r[e].key}$.addBackUrlRedefine(function(e){var n=l();return $.search.append(location.href,{type:n.type,currentMenu:n.current,POSITIVE:null})});var c,a,f,d=(c=function(e){p(e)},a=800,function(e){var n=this;clearTimeout(f),f=setTimeout(function(){c.apply(n,[e])},a)});function p(e){i.index!==e&&(i.index=e,i.current=o(i.index),i.upDateAfter&&i.upDateAfter(i))}function s(){var e="";function n(n){e=n;var t=$("#menu"+n);t.removeClass("current"),$.focusTo({el:t,marquee:[t+".autoText"]})}return{key:"p_munuforMine",keysMap:{getIndex:function(){return $(".focusBorder")[0].id.replace("menu","")},KEY_DOWN:function(){var e=this.getIndex();return e>=u.length-1||(n(++e),d(e),!0)},KEY_UP:function(){var e=this.getIndex();return e<=0||(n(--e),d(e),!0)},KEY_RIGHT:function(){return i.index===e&&i.right&&i.right(),!0},KEY_OK:function(){return i.index!==e&&(i.index=e,i.current=o(i.index),i.upDateAfter&&i.upDateAfter(i)),!0}},active:function(){n(i.index),i.isActive=!0},deactive:function(){v(),i.isActive=!1},cover:function(){return!0},uncover:function(){return!0},destroy:function(){return!0}}}function v(){var e=$("#menu"+i.index);e.addClass("current"),e.hasClass("focusBorder")}function l(){return{current:i.current,type:i.type,isActive:i.isActive,focus:"menu"+i.index}}return{init:function(e){e&&(i.current=e.current?e.current:i.current,i.type=e.type?e.type:i.type,i.upDateAfter=e.upDateAfter,i.ok=e.ok,e.right&&(i.right=e.right)),function(){$('<div id="menuContainer"><div id="menuLogo" class="'+t+'"></div><ul id="menuContent"></ul></div>').appendTo($("body"));for(var e=u||[],n="",r=[],i=0;i<e.length;i++)n='<li id="menu'+i+'" class="autoText">'+e[i]+"</li>",r.push(n);$("#menuContent").html(r.join(""))}(),p(function(e){for(var n in r)if(e===r[n].key)return r[n].index}(i.current))},active:function(){$.pTool.active("p_munuforMine"),i.isActive=!0;var e=$("#menu"+i.index);$.focusTo({el:e,marquee:["#menu"+i.index+".autoText"]}),e.removeClass("current")},blur:v,getState:l,addToPtool:function(){$.pTool.add("p_munuforMine",s())},key:s().key}}();