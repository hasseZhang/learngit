var name="provider:tvod",lg=Logger;function fetch(e,n,l,t,r){var a=+$.getChanNum(e);if(lg.debug("fetchData channelId %s channelNum: %s",e,a),!a)return setTimeout(r,0);$.s.tvod.query(null,{data:JSON.stringify({needChannel:0,queryChannel:{channelNOs:[a]},queryPlaybill:{type:3,count:1,offset:0,startTime:n}}),success:function(l){try{var c=l.channelPlaybills[0].playbillLites[0],u=c.ID,s=$.getChanById(e),o=s.realNum,i=s.mediaId;c.channelID,c=s=null,$.s.tvod.play({channelId:o,mediaId:i,playbillId:u},{success:function(e){lg.debug("success",e,l),t&&t(e,l),e=null},error:r,complete:function(){l=o=i=a=n=t=r=null}})}catch(c){Logger.out.error=["%s fetch error",name],r&&r()}},error:r})}expt.rev=1,expt.expire=0,expt.fetch=fetch;